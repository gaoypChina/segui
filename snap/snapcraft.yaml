name: segui
base: core22 # the base snap is the execution environment for this snap
version: '1.1.2'
summary: A phylogenomic data manipulation and summary statistic tool # 79 char long summary
description: |
  SEGUI (SEGUL GUI) is an ultrafast, memory efficient, 
  cross-platform tool for phylogenomic data manipulation and summary statistics calculation. 
  We develop SEGUL to address the need for a high-performance and accessible phylogenomic tool. 
  It is particularly well-suited for large-scale phylogenomic projects, 
  especially those involving thousands of loci and hundreds of samples. 
  Additionally, SEGUL is capable of handling small Sanger sequences effectively.

grade: stable
confinement: strict # use 'strict' once you have the right plugs and slots

slots:
  dbus-segui:
    interface: dbus
    bus: session
    name: com.hhandika.segui
    
apps:
  segui:
    command: segui
    extensions: [gnome] # gnome includes the libraries required by flutter
    plugs:
    - network
    slots:
      - dbus-segui

parts:
  segui:
    # See 'snapcraft plugins'
    source: .
    plugin: nil
    build-packages:
      - cmake
      - clang
      - curl
      - git
      - unzip
    override-build: |
      sudo apt-get update
      sudo apt-get install clang cmake git ninja-build pkg-config libgtk-3-dev liblzma-dev libstdc++-12-dev
      curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
      git clone https://github.com/flutter/flutter.git -b stable
      export PATH="$PATH:`pwd`/flutter/bin"
      flutter doctor
      flutter pub get
      flutter config --enable-linux-desktop
      flutter build linux --release -v
      cp -rp $SNAPCRAFT_PART_BUILD/build/linux/x64/release/bundle/* $SNAPCRAFT_PART_INSTALL/
    
